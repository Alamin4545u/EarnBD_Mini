<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ultra Auto Ad Bot</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <!-- Premium Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;900&family=Roboto+Mono:wght@500&display=swap" rel="stylesheet">

    <!-- üî• MONETAG SDK üî• -->
    <script src='//libtl.com/sdk.js' data-zone='10197154' data-sdk='show_10197154'></script>

    <style>
        body {
            background-color: #050505;
            color: #00ffcc;
            font-family: 'Orbitron', sans-serif;
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            user-select: none;
        }

        .main-container {
            width: 85%;
            max-width: 400px;
            padding: 30px;
            background: rgba(0, 255, 204, 0.03);
            border: 1px solid rgba(0, 255, 204, 0.2);
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 0 30px rgba(0, 255, 204, 0.1);
            position: relative;
            backdrop-filter: blur(10px);
        }

        h1 {
            font-size: 20px;
            letter-spacing: 2px;
            margin-bottom: 30px;
            text-shadow: 0 0 10px #00ffcc;
        }

        .status-box {
            font-size: 14px;
            color: #aaa;
            margin-bottom: 10px;
            font-family: 'Roboto Mono', monospace;
        }

        .timer-display {
            font-size: 60px;
            font-weight: 900;
            margin: 10px 0;
            color: #fff;
        }

        .info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 20px;
        }

        .info-item .val { font-size: 24px; font-weight: bold; color: #00ffcc; }
        .info-item .lbl { font-size: 10px; color: #666; letter-spacing: 1px; }

        .btn-start {
            background: #00ffcc;
            color: #000;
            border: none;
            padding: 15px 40px;
            font-size: 18px;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 20px;
            box-shadow: 0 0 20px rgba(0, 255, 204, 0.4);
            transition: all 0.3s;
        }

        .btn-start:active { transform: scale(0.95); }
        
        /* Loading Animation */
        .loading-dots:after {
            content: '.';
            animation: dots 1.5s steps(5, end) infinite;
        }
        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60% { content: '...'; }
            80%, 100% { content: ''; }
        }
    </style>
</head>
<body>

    <div class="main-container">
        <h1>AUTO AD SYSTEM</h1>
        
        <div class="status-box" id="statusText">WAITING TO START</div>
        <div class="timer-display" id="timer">00</div>

        <div class="info-grid">
            <div class="info-item">
                <div class="val" id="totalImp">0</div>
                <div class="lbl">VALID IMPRESSIONS</div>
            </div>
            <div class="info-item">
                <div class="val" id="totalCycles">0</div>
                <div class="lbl">TOTAL CYCLES</div>
            </div>
        </div>

        <button class="btn-start" id="startBtn" onclick="activateSystem()">START AUTO</button>
        <button onclick="stopSystem()" style="background:transparent; border:1px solid #333; color:#555; margin-top:15px; padding:5px 15px; border-radius:10px; cursor:pointer;">STOP & RESET</button>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        // --- CONFIGURATION ---
        const GAP_TIME = 2000;      // 2 Seconds Gap (Milliseconds)
        const AD_SHOW_TIME = 15;    // 15 Seconds Waiting
        
        // --- ELEMENTS ---
        const statusEl = document.getElementById('statusText');
        const timerEl = document.getElementById('timer');
        const startBtn = document.getElementById('startBtn');
        const impEl = document.getElementById('totalImp');
        const cycEl = document.getElementById('totalCycles');

        // --- STATE MANAGEMENT (LOCAL STORAGE) ---
        let isRunning = localStorage.getItem('auto_active') === 'true';
        let impressions = parseInt(localStorage.getItem('imp_count')) || 0;
        let cycles = parseInt(localStorage.getItem('cycle_count')) || 0;

        // UI Update Initialization
        impEl.innerText = impressions;
        cycEl.innerText = cycles;

        // --- AUTO START LOGIC ---
        // ‡¶Ø‡¶¶‡¶ø ‡¶Ü‡¶ó‡ßá ‡¶•‡ßá‡¶ï‡ßá‡¶á ‡¶¨‡ßã‡¶ü ‡¶ö‡¶æ‡¶≤‡ßÅ ‡¶•‡¶æ‡¶ï‡ßá, ‡¶™‡ßá‡¶ú ‡¶≤‡ßã‡¶° ‡¶π‡¶ì‡ßü‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶æ‡¶•‡ßá ‡¶ï‡¶æ‡¶ú ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡¶¨‡ßá
        if (isRunning) {
            startBtn.style.display = 'none';
            // ‡¶™‡ßá‡¶ú ‡¶≤‡ßã‡¶° ‡¶π‡¶ì‡ßü‡¶æ‡¶∞ ‡¶™‡¶∞ ‡ß® ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßá ‡¶™‡ßç‡¶∞‡¶∏‡ßá‡¶∏ ‡¶∂‡ßÅ‡¶∞‡ßÅ
            setTimeout(runAdSequence, GAP_TIME);
            statusEl.innerText = `GAP PHASE (${GAP_TIME/1000}s)...`;
        }

        function activateSystem() {
            localStorage.setItem('auto_active', 'true');
            isRunning = true;
            startBtn.style.display = 'none';
            // ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï‡ßá ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø ‡ß® ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶ó‡ßç‡¶Ø‡¶æ‡¶™ ‡¶∂‡ßÅ‡¶∞‡ßÅ
            statusEl.innerText = "INITIALIZING...";
            setTimeout(runAdSequence, GAP_TIME);
        }

        function stopSystem() {
            localStorage.setItem('auto_active', 'false');
            localStorage.setItem('imp_count', '0'); // ‡¶ö‡¶æ‡¶á‡¶≤‡ßá ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü ‡¶®‡¶æ‡¶ì ‡¶ï‡¶∞‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡ßá‡¶®
            localStorage.setItem('cycle_count', '0');
            location.reload();
        }

        async function runAdSequence() {
            // STEP 1: LOADING STATE
            // ‡¶Ø‡¶§‡¶ï‡ßç‡¶∑‡¶£ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶≤‡ßã‡¶° ‡¶®‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá, ‡¶§‡¶§‡¶ï‡ßç‡¶∑‡¶£ ‡¶è‡¶á ‡¶≤‡ßá‡¶ñ‡¶æ ‡¶•‡¶æ‡¶ï‡¶¨‡ßá
            statusEl.innerHTML = "LOADING AD<span class='loading-dots'></span>";
            
            // ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶ï‡¶≤ ‡¶ï‡¶∞‡¶¨
            let adLoaded = false;
            
            try {
                if (typeof show_10197154 === 'function') {
                    // ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶≤‡ßã
                    show_10197154().then(() => {
                        // ‡¶è‡¶á .then() ‡¶¨‡ßç‡¶≤‡¶ï ‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£‡¶§ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶ï‡ßç‡¶≤‡ßã‡¶ú ‡¶π‡¶≤‡ßá ‡¶∞‡¶æ‡¶® ‡¶π‡ßü, ‡¶§‡¶æ‡¶á ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶ï‡¶∞‡¶õ‡¶ø ‡¶®‡¶æ
                    });

                    // ‡¶Ø‡ßá‡¶π‡ßá‡¶§‡ßÅ Monetag ‡¶è‡¶∞ JS callback ‡¶®‡ßá‡¶á ‡¶Ø‡ßá "Ad Shown", 
                    // ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶ß‡¶∞‡ßá ‡¶®‡¶ø‡¶ö‡ßç‡¶õ‡¶ø ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® ‡¶ï‡¶≤‡ßá‡¶∞ ‡ßß-‡ß® ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡ßá ‡¶ö‡¶≤‡ßá ‡¶Ü‡¶∏‡¶¨‡ßá‡•§
                    // ‡¶ï‡¶ø‡¶®‡ßç‡¶§‡ßÅ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶ï‡ßá "Loading" ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßã ‡¶Ø‡¶§‡¶ï‡ßç‡¶∑‡¶£ ‡¶®‡¶æ ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶ü‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡¶õ‡¶ø‡•§
                    
                    setTimeout(() => {
                        // ‡ß® ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶™‡¶∞ ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶ß‡¶∞‡ßá ‡¶®‡¶ø‡¶¨ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶≤‡ßã‡¶° ‡¶π‡ßü‡ßá‡¶õ‡ßá ‡¶è‡¶¨‡¶Ç ‡¶ü‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡¶¨
                        startAdTimer();
                    }, 2500); // 2.5 ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶∏‡¶Æ‡ßü ‡¶¶‡¶ø‡¶ö‡ßç‡¶õ‡¶ø ‡¶≤‡ßã‡¶° ‡¶π‡¶ì‡ßü‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø

                } else {
                    // ‡¶Ø‡¶¶‡¶ø ‡¶®‡ßá‡¶ü‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶ï‡ßá‡¶∞ ‡¶ï‡¶æ‡¶∞‡¶£‡ßá ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡ßç‡¶ü ‡¶≤‡ßã‡¶° ‡¶®‡¶æ ‡¶π‡ßü
                    statusEl.innerText = "SCRIPT ERROR! RELOADING...";
                    setTimeout(() => location.reload(), 2000);
                }
            } catch (e) {
                statusEl.innerText = "ERROR! RETRYING...";
                setTimeout(() => location.reload(), 2000);
            }
        }

        function startAdTimer() {
            // STEP 2: AD SHOWING (15 Seconds)
            statusEl.innerText = "AD IS ACTIVE - DO NOT CLOSE";
            statusEl.style.color = "#ff3333"; // ‡¶≤‡¶æ‡¶≤ ‡¶∞‡¶ô ‡¶∏‡¶§‡¶∞‡ßç‡¶ï‡¶§‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø
            
            let timeLeft = AD_SHOW_TIME;
            
            const interval = setInterval(() => {
                timerEl.innerText = timeLeft < 10 ? `0${timeLeft}` : timeLeft;
                timeLeft--;

                if (timeLeft < 0) {
                    clearInterval(interval);
                    finishCycle();
                }
            }, 1000);
        }

        function finishCycle() {
            // STEP 3: CYCLE COMPLETE & AUTO CLOSE
            statusEl.innerText = "SUCCESS! CLOSING & RELOADING...";
            statusEl.style.color = "#00ffcc";

            // ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶è‡¶ñ‡¶®‡¶á ‡¶á‡¶Æ‡ßç‡¶™‡ßç‡¶∞‡ßá‡¶∂‡¶® ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶π‡¶¨‡ßá
            impressions++;
            cycles++;
            
            // ‡¶°‡ßá‡¶ü‡¶æ ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡¶æ
            localStorage.setItem('imp_count', impressions);
            localStorage.setItem('cycle_count', cycles);

            // UI ‡¶Ü‡¶™‡¶°‡ßá‡¶ü (‡¶Ø‡¶¶‡¶ø‡¶ì ‡¶∞‡¶ø‡¶≤‡ßã‡¶° ‡¶π‡¶¨‡ßá, ‡¶§‡¶¨‡ßÅ‡¶ì ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶¶‡ßá‡¶ñ‡¶¨‡ßá)
            impEl.innerText = impressions;
            cycEl.innerText = cycles;

            // üî• AUTO CLOSE = PAGE RELOAD üî•
            // ‡¶™‡ßá‡¶ú ‡¶∞‡¶ø‡¶≤‡ßã‡¶° ‡¶π‡¶≤‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶ó‡¶æ‡ßü‡ßá‡¶¨ ‡¶π‡ßü‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶è‡¶¨‡¶Ç ‡¶®‡¶§‡ßÅ‡¶® ‡¶∏‡ßá‡¶∂‡¶® ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶π‡¶¨‡ßá
            setTimeout(() => {
                window.location.reload();
            }, 500);
        }
    </script>
</body>
</html>

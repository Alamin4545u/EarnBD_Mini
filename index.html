<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Monetag High-CPM Pro</title>
    
    <!-- Monetag SDK -->
    <script src='//libtl.com/sdk.js' data-zone='10197154' data-sdk='show_10197154'></script>
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { --gold: #ffd700; --bg: #0a0e17; --blue: #0088cc; }
        body { background: var(--bg); color: white; font-family: 'Inter', sans-serif; margin: 0; display: flex; align-items: center; justify-content: center; height: 100vh; overflow: hidden; }
        .container { width: 90%; max-width: 400px; background: #161b22; border-radius: 30px; padding: 40px 20px; text-align: center; border: 2px solid #30363d; box-shadow: 0 0 30px rgba(0,0,0,0.8); }
        .premium-label { background: linear-gradient(90deg, #ffd700, #ff8c00); color: black; padding: 5px 15px; border-radius: 50px; font-size: 12px; font-weight: bold; margin-bottom: 20px; display: inline-block; }
        #timer { font-size: 64px; font-weight: 900; color: var(--gold); margin: 20px 0; text-shadow: 0 0 15px rgba(255, 215, 0, 0.4); }
        .status { color: #8b949e; font-size: 14px; margin-bottom: 25px; }
        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .stat-card { background: #0d1117; padding: 15px; border-radius: 15px; border: 1px solid #30363d; }
        .stat-val { font-size: 20px; font-weight: bold; color: var(--blue); display: block; }
        .stat-label { font-size: 10px; color: #8b949e; text-transform: uppercase; }
        .btn-start { background: var(--blue); color: white; border: none; padding: 15px 40px; border-radius: 50px; font-weight: bold; cursor: pointer; font-size: 18px; box-shadow: 0 5px 15px rgba(0,136,204,0.4); }
    </style>
</head>
<body>

    <div class="container" id="app">
        <div class="premium-label">REWARDED AD MODE ACTIVE</div>
        <h1>High Income Bot</h1>
        
        <div id="start-screen">
            <p class="status">Click start to trigger High CPM Rewarded Ads</p>
            <button class="btn-start" onclick="startEngine()">START EARNING</button>
        </div>

        <div id="work-screen" style="display: none;">
            <div id="timer">18</div>
            <p class="status" id="msg">Waiting for next high-value ad...</p>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-val" id="imp-count">0</span>
                    <span class="stat-label">Impressions</span>
                </div>
                <div class="stat-card">
                    <span class="stat-val">High</span>
                    <span class="stat-label">CPM Rate</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        const tele = window.Telegram.WebApp;
        tele.expand();

        let count = localStorage.getItem('total_imp') || 0;
        document.getElementById('imp-count').innerText = count;

        function startEngine() {
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('work-screen').style.display = 'block';
            localStorage.setItem('bot_running', 'true');
            runTimer();
        }

        function runTimer() {
            let timeLeft = 18;
            const timerEl = document.getElementById('timer');
            const msgEl = document.getElementById('msg');

            const cd = setInterval(() => {
                timeLeft--;
                timerEl.innerText = timeLeft;

                if (timeLeft === 5) {
                    msgEl.innerText = "ðŸš¨ Preparing Rewarded Ad...";
                    msgEl.style.color = "#ffd700";
                }

                if (timeLeft <= 0) {
                    clearInterval(cd);
                    triggerHighValueAd();
                }
            }, 1000);
        }

        async function triggerHighValueAd() {
            console.log("Triggering Rewarded Ad...");
            
            // à§§. Rewarded Interstitial à¦Ÿà§à¦°à¦¿à¦—à¦¾à¦° (à¦¸à¦¬à¦šà§‡à¦¯à¦¼à§‡ à¦¬à§‡à¦¶à¦¿ à¦Ÿà¦¾à¦•à¦¾)
            try {
                if (typeof show_10197154 === 'function') {
                    // Rewarded Call
                    show_10197154().then(() => {
                        processCompletion();
                    }).catch(e => {
                        // à¦¯à¦¦à¦¿ Rewarded à¦•à¦¾à¦œ à¦¨à¦¾ à¦•à¦°à§‡ à¦¤à¦¬à§‡ à¦‡à¦¨-à¦…à§à¦¯à¦¾à¦ª à¦Ÿà§à¦°à¦¾à¦‡ à¦•à¦°à¦¬à§‡
                        triggerInApp();
                    });
                } else {
                    location.reload();
                }
            } catch (err) {
                location.reload();
            }
        }

        function triggerInApp() {
            // à§¨. In-App Interstitial à¦Ÿà§à¦°à¦¿à¦—à¦¾à¦° (à¦¬à§à¦¯à¦¾à¦•à¦†à¦ª à¦¹à¦¿à¦¸à§‡à¦¬à§‡)
            show_10197154({
                type: 'inApp',
                inAppSettings: {
                    frequency: 1, // à¦ªà§à¦°à¦¤à¦¿à¦¬à¦¾à¦° à¦¦à§‡à¦–à¦¾à¦¬à§‡
                    capping: 0.0001, // à¦•à§‹à¦¨à§‹ à¦•à§à¦¯à¦¾à¦ª à¦¬à¦¾ à¦¬à¦¾à¦§à¦¾ à¦¨à§‡à¦‡
                    interval: 0,
                    timeout: 0,
                    everyPage: true // à¦ªà§à¦°à¦¤à¦¿ à¦°à¦¿à¦«à§à¦°à§‡à¦¶à§‡ à¦¸à§‡à¦¶à¦¨ à¦°à¦¿à¦¸à§‡à¦Ÿ à¦¹à¦¬à§‡
                }
            });
            setTimeout(processCompletion, 3000);
        }

        function processCompletion() {
            count++;
            localStorage.setItem('total_imp', count);
            if (tele.HapticFeedback) tele.HapticFeedback.notificationOccurred('success');
            
            // à¦¸à§‡à¦¶à¦¨ à¦°à¦¿à¦¸à§‡à¦Ÿ à¦•à¦°à¦¤à§‡ à¦ªà§‡à¦œ à¦°à¦¿à¦«à§à¦°à§‡à¦¶ (Monetag-à¦à¦° à¦œà¦¨à§à¦¯ à¦œà¦°à§à¦°à¦¿)
            setTimeout(() => {
                location.reload();
            }, 1000);
        }

        // à¦…à¦Ÿà§‹-à¦°à¦¿à¦¸à§à¦Ÿà¦¾à¦°à§à¦Ÿ à¦²à¦œà¦¿à¦•
        window.onload = () => {
            if (localStorage.getItem('bot_running') === 'true') {
                startEngine();
            }
        };
    </script>
</body>
</html>
